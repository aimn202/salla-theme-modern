{% comment %}
  Footer Section - ذيل الصفحة
  يحتوي على معلومات المتجر وروابط مهمة
{% endcomment %}

<footer class="s-footer" style="background: var(--color-surface); margin-top: 4rem; border-top: 1px solid rgba(128, 128, 128, 0.1);">
  
  {% comment %} القسم العلوي من الفوتر {% endcomment %}
  <div class="s-footer__main" style="padding: 3rem 0;">
    <div class="container">
      <div class="s-footer__grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem;">
        
        {% comment %} معلومات المتجر {% endcomment %}
        <div class="s-footer__section">
          <div class="s-footer__logo" style="margin-bottom: 1.5rem;">
            {% if settings.logo != blank %}
              <img src="{{ settings.logo | img_url: '150x' }}" alt="{{ shop.name }}" style="max-height: 60px;">
            {% else %}
              <h3 style="color: var(--color-primary); font-size: 1.5rem; margin: 0;">{{ shop.name }}</h3>
            {% endif %}
          </div>
          
          {% if settings.footer_description != blank %}
            <p style="color: var(--color-text-muted); line-height: 1.6; margin-bottom: 1.5rem;">
              {{ settings.footer_description }}
            </p>
          {% else %}
            <p style="color: var(--color-text-muted); line-height: 1.6; margin-bottom: 1.5rem;">
              {{ shop.description | default: 'متجر إلكتروني متخصص في تقديم أفضل المنتجات بجودة عالية وأسعار مناسبة.' }}
            </p>
          {% endif %}

          {% comment %} وسائل التواصل الاجتماعي {% endcomment %}
          <div class="s-footer__social" style="display: flex; gap: 1rem;">
            {% if settings.social_twitter_link != blank %}
              <a href="{{ settings.social_twitter_link }}" target="_blank" rel="noopener" class="s-footer__social-link" style="color: var(--color-text-muted); font-size: 1.3rem; transition: var(--transition-fast);">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M22.46,6C21.69,6.35 20.86,6.58 20,6.69C20.88,6.16 21.56,5.32 21.88,4.31C21.05,4.81 20.13,5.16 19.16,5.36C18.37,4.5 17.26,4 16,4C13.65,4 11.73,5.92 11.73,8.29C11.73,8.63 11.77,8.96 11.84,9.27C8.28,9.09 5.11,7.38 3,4.79C2.63,5.42 2.42,6.16 2.42,6.94C2.42,8.43 3.17,9.75 4.33,10.5C3.62,10.5 2.96,10.3 2.38,10C2.38,10 2.38,10 2.38,10.03C2.38,12.11 3.86,13.85 5.82,14.24C5.46,14.34 5.08,14.39 4.69,14.39C4.42,14.39 4.15,14.36 3.89,14.31C4.43,16 6,17.26 7.89,17.29C6.43,18.45 4.58,19.13 2.56,19.13C2.22,19.13 1.88,19.11 1.54,19.07C3.44,20.29 5.7,21 8.12,21C16,21 20.33,14.46 20.33,8.79C20.33,8.6 20.33,8.42 20.32,8.23C21.16,7.63 21.88,6.87 22.46,6Z"/>
                </svg>
              </a>
            {% endif %}

            {% if settings.social_facebook_link != blank %}
              <a href="{{ settings.social_facebook_link }}" target="_blank" rel="noopener" class="s-footer__social-link" style="color: var(--color-text-muted); font-size: 1.3rem; transition: var(--transition-fast);">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M24,12.073C24,5.405 18.627,0 12,0S0,5.405 0,12.073C0,18.1 4.388,23.094 10.125,24V15.563H7.078V12.073H10.125V9.404C10.125,6.369 11.917,4.715 14.658,4.715C15.97,4.715 17.344,4.953 17.344,4.953V7.928H15.83C14.34,7.928 13.875,8.83 13.875,9.755V12.073H17.203L16.671,15.563H13.875V24C19.612,23.094 24,18.1 24,12.073"/>
                </svg>
              </a>
            {% endif %}

            {% if settings.social_instagram_link != blank %}
              <a href="{{ settings.social_instagram_link }}" target="_blank" rel="noopener" class="s-footer__social-link" style="color: var(--color-text-muted); font-size: 1.3rem; transition: var(--transition-fast);">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M7.8,2H16.2C19.4,2 22,4.6 22,7.8V16.2A5.8,5.8 0 0,1 16.2,22H7.8C4.6,22 2,19.4 2,16.2V7.8A5.8,5.8 0 0,1 7.8,2M7.6,4A3.6,3.6 0 0,0 4,7.6V16.4C4,18.39 5.61,20 7.6,20H16.4A3.6,3.6 0 0,0 20,16.4V7.6C20,5.61 18.39,4 16.4,4H7.6M17.25,5.5A1.25,1.25 0 0,1 18.5,6.75A1.25,1.25 0 0,1 17.25,8A1.25,1.25 0 0,1 16,6.75A1.25,1.25 0 0,1 17.25,5.5M12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9Z"/>
                </svg>
              </a>
            {% endif %}

            {% if settings.social_youtube_link != blank %}
              <a href="{{ settings.social_youtube_link }}" target="_blank" rel="noopener" class="s-footer__social-link" style="color: var(--color-text-muted); font-size: 1.3rem; transition: var(--transition-fast);">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M10,15L15.19,12L10,9V15M21.56,7.17C21.69,7.64 21.78,8.27 21.84,9.07C21.91,9.87 21.94,10.56 21.94,11.16L22,12C22,14.19 21.84,15.8 21.56,16.83C21.31,17.73 20.73,18.31 19.83,18.56C19.36,18.69 18.5,18.78 17.18,18.84C15.88,18.91 14.69,18.94 13.59,18.94L12,19C7.81,19 5.2,18.84 4.17,18.56C3.27,18.31 2.69,17.73 2.44,16.83C2.31,16.36 2.22,15.73 2.16,14.93C2.09,14.13 2.06,13.44 2.06,12.84L2,12C2,9.81 2.16,8.2 2.44,7.17C2.69,6.27 3.27,5.69 4.17,5.44C4.64,5.31 5.5,5.22 6.82,5.16C8.12,5.09 9.31,5.06 10.41,5.06L12,5C16.19,5 18.8,5.16 19.83,5.44C20.73,5.69 21.31,6.27 21.56,7.17Z"/>
                </svg>
              </a>
            {% endif %}
          </div>
        </div>

        {% comment %} روابط سريعة {% endcomment %}
        <div class="s-footer__section">
          <h4 style="color: var(--color-text); font-size: 1.2rem; font-weight: 600; margin-bottom: 1.5rem;">
            روابط سريعة
          </h4>
          <ul style="list-style: none; margin: 0; padding: 0;">
            <li style="margin-bottom: 0.8rem;">
              <a href="/" style="color: var(--color-text-muted); text-decoration: none; transition: var(--transition-fast);">
                الرئيسية
              </a>
            </li>
            <li style="margin-bottom: 0.8rem;">
              <a href="/collections/all" style="color: var(--color-text-muted); text-decoration: none; transition: var(--transition-fast);">
                جميع المنتجات
              </a>
            </li>
            <li style="margin-bottom: 0.8rem;">
              <a href="/pages/about" style="color: var(--color-text-muted); text-decoration: none; transition: var(--transition-fast);">
                عن المتجر
              </a>
            </li>
            <li style="margin-bottom: 0.8rem;">
              <a href="/pages/contact" style="color: var(--color-text-muted); text-decoration: none; transition: var(--transition-fast);">
                تواصل معنا
              </a>
            </li>
            <li style="margin-bottom: 0.8rem;">
              <a href="/blogs/news" style="color: var(--color-text-muted); text-decoration: none; transition: var(--transition-fast);">
                المدونة
              </a>
            </li>
          </ul>
        </div>

        {% comment %} خدمة العملاء {% endcomment %}
        <div class="s-footer__section">
          <h4 style="color: var(--color-text); font-size: 1.2rem; font-weight: 600; margin-bottom: 1.5rem;">
            خدمة العملاء
          </h4>
          <ul style="list-style: none; margin: 0; padding: 0;">
            <li style="margin-bottom: 0.8rem;">
              <a href="/pages/shipping-policy" style="color: var(--color-text-muted); text-decoration: none; transition: var(--transition-fast);">
                سياسة الشحن
              </a>
            </li>
            <li style="margin-bottom: 0.8rem;">
              <a href="/pages/refund-policy" style="color: var(--color-text-muted); text-decoration: none; transition: var(--transition-fast);">
                سياسة الاسترداد
              </a>
            </li>
            <li style="margin-bottom: 0.8rem;">
              <a href="/pages/privacy-policy" style="color: var(--color-text-muted); text-decoration: none; transition: var(--transition-fast);">
                سياسة الخصوصية
              </a>
            </li>
            <li style="margin-bottom: 0.8rem;">
              <a href="/pages/terms-of-service" style="color: var(--color-text-muted); text-decoration: none; transition: var(--transition-fast);">
                شروط الخدمة
              </a>
            </li>
            <li style="margin-bottom: 0.8rem;">
              <a href="/pages/faq" style="color: var(--color-text-muted); text-decoration: none; transition: var(--transition-fast);">
                الأسئلة الشائعة
              </a>
            </li>
          </ul>
        </div>

        {% comment %} معلومات الاتصال {% endcomment %}
        <div class="s-footer__section">
          <h4 style="color: var(--color-text); font-size: 1.2rem; font-weight: 600; margin-bottom: 1.5rem;">
            تواصل معنا
          </h4>
          
          {% if settings.contact_email != blank %}
            <div style="display: flex; align-items: center; gap: 0.8rem; margin-bottom: 1rem; color: var(--color-text-muted);">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                <path d="M20,8L12,13L4,8V6L12,11L20,6M20,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V6C22,4.89 21.1,4 20,4Z"/>
              </svg>
              <a href="mailto:{{ settings.contact_email }}" style="color: inherit; text-decoration: none;">
                {{ settings.contact_email }}
              </a>
            </div>
          {% endif %}

          {% if settings.contact_phone != blank %}
            <div style="display: flex; align-items: center; gap: 0.8rem; margin-bottom: 1rem; color: var(--color-text-muted);">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                <path d="M6.62,10.79C8.06,13.62 10.38,15.94 13.21,17.38L15.41,15.18C15.69,14.9 16.08,14.82 16.43,14.93C17.55,15.3 18.75,15.5 20,15.5A1,1 0 0,1 21,16.5V20A1,1 0 0,1 20,21A17,17 0 0,1 3,4A1,1 0 0,1 4,3H7.5A1,1 0 0,1 8.5,4C8.5,5.25 8.7,6.45 9.07,7.57C9.18,7.92 9.1,8.31 8.82,8.59L6.62,10.79Z"/>
              </svg>
              <a href="tel:{{ settings.contact_phone }}" style="color: inherit; text-decoration: none;">
                {{ settings.contact_phone }}
              </a>
            </div>
          {% endif %}

          {% if settings.contact_address != blank %}
            <div style="display: flex; align-items: flex-start; gap: 0.8rem; margin-bottom: 1rem; color: var(--color-text-muted);">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" style="margin-top: 2px;">
                <path d="M12,11.5A2.5,2.5 0 0,1 9.5,9A2.5,2.5 0 0,1 12,6.5A2.5,2.5 0 0,1 14.5,9A2.5,2.5 0 0,1 12,11.5M12,2A7,7 0 0,0 5,9C5,14.25 12,22 12,22C12,22 19,14.25 19,9A7,7 0 0,0 12,2Z"/>
              </svg>
              <span>{{ settings.contact_address }}</span>
            </div>
          {% endif %}

          {% comment %} النشرة البريدية {% endcomment %}
          <div style="margin-top: 2rem;">
            <h5 style="color: var(--color-text); font-size: 1rem; font-weight: 600; margin-bottom: 1rem;">
              اشترك في النشرة البريدية
            </h5>
            <form action="/contact#contact_form" method="post" id="newsletter-form">
              <input type="hidden" name="form_type" value="customer">
              <input type="hidden" name="utf8" value="✓">
              <div style="display: flex; gap: 0.5rem;">
                <input 
                  type="email" 
                  name="contact[email]" 
                  placeholder="البريد الإلكتروني" 
                  required
                  style="flex: 1; padding: 0.7rem; border: 1px solid #ddd; border-radius: 8px; background: var(--color-bg);"
                >
                <button type="submit" class="s-button--primary" style="padding: 0.7rem 1.5rem; white-space: nowrap;">
                  اشتراك
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>

  {% comment %} شريط حقوق الطبع والنشر {% endcomment %}
  <div class="s-footer__bottom" style="border-top: 1px solid rgba(128, 128, 128, 0.1); padding: 1.5rem 0; background: rgba(0, 0, 0, 0.02);">
    <div class="container">
      <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;">
        
        {% comment %} حقوق الطبع والنشر {% endcomment %}
        <div style="color: var(--color-text-muted); font-size: 0.9rem;">
          &copy; {{ 'now' | date: '%Y' }} {{ shop.name }}. جميع الحقوق محفوظة.
        </div>

        {% comment %} طرق الدفع المقبولة {% endcomment %}
        <div style="display: flex; align-items: center; gap: 1rem;">
          <span style="color: var(--color-text-muted); font-size: 0.9rem;">طرق الدفع:</span>
          <div style="display: flex; gap: 0.5rem;">
            <div style="width: 40px; height: 25px; background: #1434CB; border-radius: 4px; display: flex; align-items: center; justify-content: center; color: white; font-size: 0.7rem; font-weight: bold;">VISA</div>
            <div style="width: 40px; height: 25px; background: #EB001B; border-radius: 4px; display: flex; align-items: center; justify-content: center; color: white; font-size: 0.6rem; font-weight: bold;">MC</div>
            <div style="width: 40px; height: 25px; background: #003087; border-radius: 4px; display: flex; align-items: center; justify-content: center; color: white; font-size: 0.6rem; font-weight: bold;">AMEX</div>
            <div style="width: 40px; height: 25px; background: #0070BA; border-radius: 4px; display: flex; align-items: center; justify-content: center; color: white; font-size: 0.6rem; font-weight: bold;">PayPal</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</footer>

{% comment %} تحسينات CSS للفوتر {% endcomment %}
<style>
  .s-footer__social-link:hover {
    color: var(--color-primary) !important;
    transform: scale(1.1);
  }

  .s-footer__section ul li a:hover {
    color: var(--color-primary) !important;
    padding-right: 0.5rem;
  }

  /* تصميم متجاوب للفوتر */
  @media (max-width: 768px) {
    .s-footer__grid {
      grid-template-columns: 1fr;
      text-align: center;
    }
    
    .s-footer__bottom > div {
      flex-direction: column;
      text-align: center;
    }
    
    .s-footer__social {
      justify-content: center;
    }
  }

  /* تحسين تصميم النشرة البريدية */
  #newsletter-form input:focus {
    border-color: var(--color-primary);
    outline: none;
    box-shadow: 0 0 0 2px rgba(90, 103, 216, 0.2);
  }

  /* تحسين تخطيط معلومات الاتصال */
  @media (max-width: 768px) {
    .s-footer__section > div[style*="display: flex"] {
      justify-content: center;
    }
  }
</style>

{% comment %} JavaScript للنشرة البريدية {% endcomment %}
<script>
  document.getElementById('newsletter-form').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const form = this;
    const email = form.querySelector('input[name="contact[email]"]').value;
    
    if (!email) {
      showNotification('يرجى إدخال البريد الإلكتروني', 'error');
      return;
    }

    // إرسال البيانات
    fetch('/contact', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/x-www-form-urlencoded',
      },
      body: new URLSearchParams(new FormData(form))
    })
    .then(response => {
      if (response.ok) {
        showNotification('تم الاشتراك بنجاح! شكراً لك', 'success');
        form.reset();
      } else {
        throw new Error('فشل في الاشتراك');
      }
    })
    .catch(error => {
      console.error('Error:', error);
      showNotification('حدث خطأ، يرجى المحاولة مرة أخرى', 'error');
    });
  });
</script>
